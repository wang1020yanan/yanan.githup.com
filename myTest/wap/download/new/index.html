
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>fullPage.js — 回调函数演示_dowebok</title>
    <link rel="stylesheet" href="http://cdn.dowebok.com/77/css/jquery.fullPage.css">
    <style>
        .section1 { background: url('img/bg-1.jpg') no-repeat;background-size: cover}
        .section2 { background: url('img/bg-2.jpg') no-repeat;background-size: cover}
        .section3 { background:url('img/bg-3.jpg') no-repeat;background-size: cover}
        .section4 { background:url('img/bg-4.jpg') no-repeat;background-size: cover}
        #fp-nav{
            display: none;
        }
        #menu { margin: 0; padding: 0; position: fixed; left: 10px; top: 10px; list-style-type: none; z-index: 70;}
        #menu li { float: left; margin:  0 10px 0 0; font-size: 14px;}
        #menu a { float: left; padding: 10px 20px; background-color: #fff; color: #333; text-decoration: none;}
        #menu .active a { color: #fff; background-color: #333;}

        .section { text-align: center; font: 50px "Microsoft Yahei"; color: #fff;}
        .section1 p { position: relative; bottom: 120%;}
        .section1 h3 { position: relative; bottom: 120%;}
        .section2 p { position: relative; left: -120%;}
        .section3 p { position: relative;left: 120%;}
        .section4 p { position: relative;  bottom: -120%;}
    </style>
    <script src="http://cdn.staticfile.org/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://cdn.dowebok.com/77/js/jquery.fullPage.min.js"></script>
    <script src="http://cdn.staticfile.org/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script>
        $(function(){
//            $('.section1').find('p').animate({
//                bottom: '0'
//            }, 1500, 'easeOutExpo');
//            $('.section1').find('h3').animate({
//                bottom: '0'
//            }, 1500, 'easeOutExpo');

            $('#dowebok').fullpage({
                sectionsColor: ['#1bbc9b', '#4BBFC3', '#7BAABE', '#f90'],
                anchors: ['page1', 'page2', 'page3', 'page4'],
                menu: '#menu',

                'navigation': true,

                afterLoad: function(anchorLink, index){
                    if(index == 1){
                        $('.section1').find('p').animate({
                            bottom: '0'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index == 2){
                        $('.section2').find('p').delay(0).animate({
                            left: '0'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index == 3){
                        $('.section3').find('p').delay(0).animate({
                           left: '0'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index == 4){
                        $('.section4').find('p').animate({
                            bottom: '0'
                        }, 1500, 'easeOutExpo');
                    }
                },
                onLeave: function(index, direction){
                    if(index == 1){
                        $('.section1').find('p').animate({
                            bottom: '120%'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index == '2'){
                        $('.section2').find('p').delay(0).animate({
                            left: '-120%'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index ==  '3'){
                        $('.section3').find('p').delay(0).animate({
                            left: '120%'
                        }, 1500, 'easeOutExpo');
                    }
                    if(index == '4'){
                        $('.section4').find('p').animate({
                            bottom: '-120%'
                        }, 1500, 'easeOutExpo');
                    }
                }
            });
        });
        function loadImg(arr,callback){
            var result={};
            var iNow=0;
            var per = $("#percents");
            console.log(per);
            for(var i=0;i<arr.length;i++){
                var oImg=new Image();
                var tmp=arr[i].split('.');
                result[tmp[0]]=oImg;
                oImg.onload=function(){
                    iNow++;
                    var nowPercent=parseInt(iNow/arr.length*100);
                    $("#colors").animate({width:nowPercent+'%'},100,function(){
                        $("#percents").text(nowPercent+"%");
                    });
                    console.log(nowPercent);
                    if(iNow>=arr.length){
                        callback(result);
                    }
                };
                oImg.src='img/'+arr[i];
            }
        }
        loadImg(['bg-1.jpg','bg-2.jpg','bg-3.jpg', 'bg-4.jpg'],function(result){
            console.log(result);
            $('#fp-nav').delay(800).fadeIn();
            $('.my-wrap').delay(800).fadeIn();
            $('.pro-wrap').delay(400).fadeOut();
            $('.section1').find('p').delay(800).animate({
                bottom: '0'
            }, 1500, 'easeOutExpo');
            $('.section1').find('h3').delay(800).animate({
                bottom: '0'
            }, 1500, 'easeOutExpo');
        });
    </script>
</head>

<body>
<div class="pro-wrap" style="background: #CCCCCC;height: 40px;text-align: center;color: #fff;position: relative;border-radius: 5px;top: 44%;width: 80%;
    left: 10%;">
    <div id="colors" style="position: absolute ;height: 40px;background: #f4a717;z-index: 0;border-radius: 5px"></div>
    <h3 id="percents" style="position: relative;line-height: 40px">加载中...</h3>
</div>

<div class="my-wrap" style="display: none">
    <ul id="menu">
        <li data-menuanchor="page1" class="active"><a href="#page1">TOP</a></li>
        <li data-menuanchor="page2"><a href="#page2">2</a></li>
        <li data-menuanchor="page3"><a href="#page3">3</a></li>
        <li data-menuanchor="page4"><a href="#page4">4</a></li>
    </ul>
    <div id="dowebok">
        <div class="section section1">
            <h3>第一屏</h3>
            <p>fullPage.js — 回调函数演示</p>
        </div>
        <div class="section section2">
            <h3>第2屏</h3>
            <p>滚动到第三屏后的回调函数执行的效果</p>
            <!--<div class="slide"><h3>第二屏的第一屏</h3></div>-->
            <!--<div class="slide"><h3>第二屏的第二屏</h3></div>-->
            <!--<div class="slide"><h3>第二屏的第三屏</h3></div>-->
        </div>
        <div class="section section3">
            <h3>第三屏</h3>
            <p>滚动到第三屏后的回调函数执行的效果</p>
        </div>
        <div class="section section4">
            <h3>第四屏</h3>
            <p>滚动到第四屏后的回调函数执行的效果</p>
        </div>
    </div>
</div>













</body>
</html>